<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.web.WebView?>

<StackPane xmlns="http://javafx.com/javafx/17"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.the_pathfinders.SocialWorkController"
           stylesheets="@../css/SocialWork.css">

    <!-- Main Content Wrapper with ScrollPane (blurred when popup shows) -->
    <ScrollPane fx:id="scrollWrapper" fitToWidth="true" fitToHeight="true"
                hbarPolicy="NEVER" vbarPolicy="AS_NEEDED"
                styleClass="social-work-scroll">
        <VBox fx:id="contentWrapper"
              styleClass="social-work-root"
              style="-fx-background-color: linear-gradient(from 0% 0% to 100% 100%, #fce4ec 0%, #f3e5f5 25%, #e1f5fe 50%, #e0f2f1 75%, #fff9e6 100%);"
              alignment="CENTER"
              spacing="30">

            <padding>
                <Insets top="40" right="40" bottom="40" left="40"/>
            </padding>

        <!-- Header -->
        <HBox alignment="CENTER_LEFT" spacing="15">
            <Button fx:id="backBtn" text="Back" styleClass="back-btn"/>
            <Label text="Social Work" styleClass="page-title"/>
        </HBox>

        <!-- Title -->
        <Label text="Choose Your Impact" styleClass="subtitle"/>

        <!-- Hand-drawn style container -->
        <VBox styleClass="hand-drawn-box" alignment="CENTER" spacing="30">

            <!-- Blood Donation (left-aligned) -->
            <HBox alignment="CENTER_LEFT" HBox.hgrow="ALWAYS">
                <Button fx:id="bloodDonationBtn"
                        text="Blood Donation"
                        styleClass="hand-drawn-btn, blood-btn"/>
            </HBox>

            <!-- Tree Plantation (right-aligned) -->
            <HBox alignment="CENTER_RIGHT" HBox.hgrow="ALWAYS">
                <Button fx:id="treePlantationBtn"
                        text="Tree Plantation"
                        styleClass="hand-drawn-btn, tree-btn"/>
            </HBox>

            <!-- Seminar (left-aligned) -->
            <HBox alignment="CENTER_LEFT" HBox.hgrow="ALWAYS">
                <Button fx:id="seminarBtn"
                        text="Seminar"
                        styleClass="hand-drawn-btn, seminar-btn"/>
            </HBox>

            <!-- Donation (right-aligned) -->
            <HBox alignment="CENTER_RIGHT" HBox.hgrow="ALWAYS">
                <Button fx:id="donationBtn"
                        text="Donation"
                        styleClass="hand-drawn-btn, donation-btn"/>
            </HBox>

        </VBox>
        </VBox>
    </ScrollPane>

    <!-- Blood Donation Popup Overlay -->
    <StackPane fx:id="bloodDonationOverlay" visible="false" managed="false" styleClass="overlay-root">
        <VBox fx:id="overlayContentBox" spacing="24" alignment="CENTER" styleClass="blood-overlay-box">
            <ImageView fx:id="questionIcon" fitWidth="56" fitHeight="56" preserveRatio="true" />
            <Label text="Choose Blood Donation Platform" styleClass="blood-overlay-title" />
            <Label text="Select a platform to donate blood and help save lives." wrapText="true" styleClass="blood-overlay-text" />
            
            <!-- Three Buttons -->
            <VBox spacing="16" alignment="CENTER">
                <Button fx:id="redCrescentBtn" text="Red Crescent" styleClass="blood-option-btn" />
                <Button fx:id="roktoBtn" text="Rokto" styleClass="blood-option-btn" />
                <Button fx:id="donateBloodBDBtn" text="DonateBloodBD" styleClass="blood-option-btn" />
                <Button fx:id="donateInAppBtn" text="Donate Blood In-App" styleClass="blood-option-btn" />
            </VBox>
            
            <!-- Close Button -->
            <Button fx:id="closeOverlayBtn" text="Close" styleClass="blood-overlay-close" />
        </VBox>
    </StackPane>

    <!-- Tree Plantation Popup Overlay -->
    <StackPane fx:id="treePlantationOverlay" visible="false" managed="false" styleClass="overlay-root">
        <VBox fx:id="treeOverlayContentBox" spacing="24" alignment="CENTER" styleClass="tree-overlay-box">
            <ImageView fx:id="treeIcon" fitWidth="56" fitHeight="56" preserveRatio="true" />
            <Label text="Choose Tree Plantation Platform" styleClass="tree-overlay-title" />
            <Label text="Select a platform to contribute to reforestation efforts." wrapText="true" styleClass="tree-overlay-text" />

            <!-- Three Buttons -->
            <VBox spacing="16" alignment="CENTER">
                <Button fx:id="treeNationBtn" text="Tree Nation" styleClass="tree-option-btn" />
                <Button fx:id="oneTreePlantedBtn" text="One Tree Planted" styleClass="tree-option-btn" />
                <Button fx:id="teamTreesBtn" text="Team Trees" styleClass="tree-option-btn" />
                <Button fx:id="plantTreeBtn" text ="Plant a Tree" styleClass="tree-option-btn" />
            </VBox>

            <!-- Close Button -->
            <Button fx:id="closeTreeOverlayBtn" text="Close" styleClass="tree-overlay-close" />
        </VBox>
    </StackPane>

    <!-- Donation Popup Overlay -->
    <StackPane fx:id="donationOverlay" visible="false" managed="false" styleClass="overlay-root">
        <VBox fx:id="donationOverlayContentBox" spacing="24" alignment="CENTER" styleClass="donation-overlay-box">
            <ImageView fx:id="donationIcon" fitWidth="56" fitHeight="56" preserveRatio="true" />
            <Label text="Choose Donation Platform" styleClass="donation-overlay-title" />
            <Label text="Select a platform to make a difference through your donation." wrapText="true" styleClass="donation-overlay-text" />

            <!-- Four Buttons -->
            <VBox spacing="16" alignment="CENTER">
                <Button fx:id="jaagoBtn" text="JAAGO Foundation" styleClass="donation-option-btn" />
                <Button fx:id="mercyBtn" text="Mercy Without Limits" styleClass="donation-option-btn" />
                <Button fx:id="saveChildrenBtn" text="Save the Children" styleClass="donation-option-btn" />
                <Button fx:id="friendshipBtn" text="Friendship NGO" styleClass="donation-option-btn" />
            </VBox>

            <!-- Close Button -->
            <Button fx:id="closeDonationOverlayBtn" text="Close" styleClass="donation-overlay-close" />
        </VBox>
    </StackPane>

    <!-- Seminar Popup Overlay -->
    <StackPane fx:id="seminarOverlay" visible="false" managed="false" styleClass="overlay-root">
        <VBox fx:id="seminarOverlayContentBox" spacing="24" alignment="CENTER" styleClass="seminar-overlay-box">
            <ImageView fx:id="seminarIcon" fitWidth="56" fitHeight="56" preserveRatio="true" />
            <Label text="Choose Seminar Platform" styleClass="seminar-overlay-title" />
            <Label text="Select a platform to explore mental health seminars and conferences." wrapText="true" styleClass="seminar-overlay-text" />

            <!-- Four Buttons -->
            <VBox spacing="16" alignment="CENTER">
                <Button fx:id="allConferenceBtn" text="All Conference Alert" styleClass="seminar-option-btn" />
                <Button fx:id="mentalHealthSummitBtn" text="Mental Health Summit" styleClass="seminar-option-btn" />
                <Button fx:id="quillTherapyBtn" text="Quill Therapy Conferences" styleClass="seminar-option-btn" />
                <Button fx:id="globallyMindedBtn" text="Globally Minded Events" styleClass="seminar-option-btn" />
            </VBox>

            <!-- Close Button -->
            <Button fx:id="closeSeminarOverlayBtn" text="Close" styleClass="seminar-overlay-close" />
        </VBox>
    </StackPane>

    <!-- Web Browser Overlay -->
    <StackPane fx:id="browserOverlay" visible="false" managed="false" styleClass="browser-overlay-root">
        <VBox fx:id="browserContainer" spacing="0" alignment="TOP_CENTER" styleClass="browser-container" VBox.vgrow="ALWAYS">
            <!-- Browser Header with Back Button -->
            <HBox spacing="12" alignment="CENTER_LEFT" styleClass="browser-header">
                <Button fx:id="browserBackBtn" text="âŸµ Back" styleClass="browser-back-btn" />
                <Label fx:id="browserTitleLabel" text="" styleClass="browser-title" />
            </HBox>
            <!-- WebView will be created lazily in the controller -->
        </VBox>
    </StackPane>

    <!-- In-App Donation Overlay -->
    <StackPane fx:id="inAppDonationOverlay" visible="false" managed="false" styleClass="in-app-overlay">
        <VBox fx:id="inAppFormBox"
              spacing="18"
              alignment="TOP_LEFT"
              styleClass="in-app-form">
            <Label text="Donate Blood In-App" styleClass="in-app-title"/>
            <Label text="Fill these quick details so Hope Seed can match you with urgent requests."
                   wrapText="true"
                   styleClass="in-app-subtitle"/>

            <VBox spacing="12" styleClass="in-app-form-body">
                <Label text="Contact Number" styleClass="in-app-label"/>
                <TextField fx:id="donorContactField"
                           promptText="+8801..."
                           styleClass="in-app-field"/>

                <Label text="Blood Group" styleClass="in-app-label"/>
                <ComboBox fx:id="donorBloodGroupCombo"
                          promptText="Select blood group"
                          styleClass="in-app-field"/>

                <Label text="Time Since Last Donation" styleClass="in-app-label"/>
                <TextField fx:id="donorLastDonationField"
                           promptText="e.g., 3 months ago"
                           styleClass="in-app-field"/>

                <Label text="Area of Residence" styleClass="in-app-label"/>
                <TextField fx:id="donorAreaField"
                           promptText="City / district"
                           styleClass="in-app-field"/>
            </VBox>

            <Label fx:id="donorFormFeedbackLabel"
                   text=""
                   visible="false"
                   managed="false"
                   styleClass="form-feedback"/>

            <HBox spacing="12" alignment="CENTER_RIGHT">
                <Button fx:id="donorCancelBtn" text="Cancel" styleClass="form-cancel-btn"/>
                <Button fx:id="donorSubmitBtn" text="Save Details" styleClass="form-submit-btn"/>
            </HBox>
        </VBox>
    </StackPane>

</StackPane>
