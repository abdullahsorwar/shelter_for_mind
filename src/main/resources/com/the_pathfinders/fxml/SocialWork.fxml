<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.web.WebView?>

<StackPane xmlns="http://javafx.com/javafx/17"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.the_pathfinders.SocialWorkController"
           stylesheets="@../css/SocialWork.css">

    <!-- Main Content Wrapper (blurred when popup shows) -->
    <VBox fx:id="contentWrapper"
          styleClass="social-work-root"
          alignment="CENTER"
          spacing="30">

        <padding>
            <Insets top="40" right="40" bottom="40" left="40"/>
        </padding>

        <!-- Header -->
        <HBox alignment="CENTER_LEFT" spacing="15">
            <Button fx:id="backBtn" text="Back" styleClass="back-btn"/>
            <Label text="Social Work" styleClass="page-title"/>
        </HBox>

        <!-- Title -->
        <Label text="Choose Your Impact" styleClass="subtitle"/>

        <!-- Hand-drawn style container -->
        <VBox styleClass="hand-drawn-box" alignment="CENTER" spacing="30">

            <!-- Blood Donation (top-left) -->
            <HBox alignment="CENTER_LEFT">
                <Button fx:id="bloodDonationBtn"
                        text="Blood Donation"
                        styleClass="hand-drawn-btn"/>
            </HBox>

            <!-- Tree Plantation (top-right) -->
            <HBox alignment="CENTER_RIGHT">
                <Button fx:id="treePlantationBtn"
                        text="Tree Plantation"
                        styleClass="hand-drawn-btn"/>
            </HBox>

            <!-- Seminar (bottom-left) -->
            <HBox alignment="CENTER_LEFT">
                <Button fx:id="seminarBtn"
                        text="Seminar"
                        styleClass="hand-drawn-btn"/>
            </HBox>

            <!-- Donation (bottom-right) -->
            <HBox alignment="CENTER_RIGHT">
                <Button fx:id="donationBtn"
                        text="Donation"
                        styleClass="hand-drawn-btn"/>
            </HBox>

        </VBox>
    </VBox>

    <!-- Blood Donation Popup Overlay -->
    <StackPane fx:id="bloodDonationOverlay" visible="false" managed="false" styleClass="overlay-root">
        <VBox fx:id="overlayContentBox" spacing="24" alignment="CENTER" styleClass="blood-overlay-box">
            <ImageView fx:id="questionIcon" fitWidth="56" fitHeight="56" preserveRatio="true" />
            <Label text="Choose Blood Donation Platform" styleClass="blood-overlay-title" />
            <Label text="Select a platform to donate blood and help save lives." wrapText="true" styleClass="blood-overlay-text" />
            
            <!-- Three Buttons -->
            <VBox spacing="16" alignment="CENTER">
                <Button fx:id="redCrescentBtn" text="Red Crescent" styleClass="blood-option-btn" />
                <Button fx:id="roktoBtn" text="Rokto" styleClass="blood-option-btn" />
                <Button fx:id="donateBloodBDBtn" text="DonateBloodBD" styleClass="blood-option-btn" />
                <Button fx:id="donateInAppBtn" text="Donate Blood In-App" styleClass="blood-option-btn" />
            </VBox>
            
            <!-- Close Button -->
            <Button fx:id="closeOverlayBtn" text="Close" styleClass="blood-overlay-close" />
        </VBox>
    </StackPane>

    <!-- Web Browser Overlay -->
    <StackPane fx:id="browserOverlay" visible="false" managed="false" styleClass="browser-overlay-root">
        <VBox spacing="0" alignment="TOP_CENTER" styleClass="browser-container" VBox.vgrow="ALWAYS">
            <!-- Browser Header with Back Button -->
            <HBox spacing="12" alignment="CENTER_LEFT" styleClass="browser-header">
                <Button fx:id="browserBackBtn" text="âŸµ Back" styleClass="browser-back-btn" />
                <Label fx:id="browserTitleLabel" text="" styleClass="browser-title" />
            </HBox>
            <!-- WebView for browsing -->
            <WebView fx:id="webView" VBox.vgrow="ALWAYS" />
        </VBox>
    </StackPane>

    <!-- In-App Donation Overlay -->
    <StackPane fx:id="inAppDonationOverlay" visible="false" managed="false" styleClass="in-app-overlay">
        <VBox fx:id="inAppFormBox"
              spacing="18"
              alignment="TOP_LEFT"
              styleClass="in-app-form">
            <Label text="Donate Blood In-App" styleClass="in-app-title"/>
            <Label text="Fill these quick details so Hope Seed can match you with urgent requests."
                   wrapText="true"
                   styleClass="in-app-subtitle"/>

            <VBox spacing="12" styleClass="in-app-form-body">
                <Label text="Contact Number" styleClass="in-app-label"/>
                <TextField fx:id="donorContactField"
                           promptText="+8801..."
                           styleClass="in-app-field"/>

                <Label text="Blood Group" styleClass="in-app-label"/>
                <ComboBox fx:id="donorBloodGroupCombo"
                          promptText="Select blood group"
                          styleClass="in-app-field"/>

                <Label text="Time Since Last Donation" styleClass="in-app-label"/>
                <TextField fx:id="donorLastDonationField"
                           promptText="e.g., 3 months ago"
                           styleClass="in-app-field"/>

                <Label text="Area of Residence" styleClass="in-app-label"/>
                <TextField fx:id="donorAreaField"
                           promptText="City / district"
                           styleClass="in-app-field"/>
            </VBox>

            <Label fx:id="donorFormFeedbackLabel"
                   text=""
                   visible="false"
                   managed="false"
                   styleClass="form-feedback"/>

            <HBox spacing="12" alignment="CENTER_RIGHT">
                <Button fx:id="donorCancelBtn" text="Cancel" styleClass="form-cancel-btn"/>
                <Button fx:id="donorSubmitBtn" text="Save Details" styleClass="form-submit-btn"/>
            </HBox>
        </VBox>
    </StackPane>

</StackPane>
